<!-- home.html -->
<link rel="stylesheet" href="./css/home.css">
<style>
  .home_menu {
    padding: 0;
  }

  .home_menu ul {
    display: flex;
    gap: 20px;
  }

  .home_menu ul li {
    list-style: none;
  }

  .home_menu_li {
    padding: 10px 20px;
    margin-right: 10px;
    border: none;
    border-radius: 20px;
    background-color: #f1f1f1;
    color: #333;
    font-size: 16px;
    cursor: pointer;
    position: relative;
    transition: background-color 0.3s, color 0.3s;
  }

  .home_menu_li::before {
    content: '';
    display: none;
    margin-right: 8px;
  }

  .home_menu_li.active {
    background-color: #000;
    color: #fff;
  }

  .home_menu_li.active::before {
    display: inline-block;
    content: attr(data-icon);
  }

  .movie_sub_first_menu {
    display: flex;
    position: relative;
  }

  .movie_sub_first_menu_front {
    display: flex;
    gap: 20px;
    padding: 0;
    margin: 0;
  }

  .movie_sub_first_menu_back {
    display: flex;
    padding: 0;
    margin: 0;
    position: absolute;
    right: 0;
  }

  .movie_sub_first_menu_front li,
  .movie_sub_first_menu_back li {
    list-style: none;
  }

  .underline-middle {
    position: relative;
    display: inline-block;
    cursor: pointer;
  }

  .underline-middle::after {
    content: "";
    position: absolute;
    bottom: -2px;
    left: 50%;
    width: 0%;
    transform: translateX(-50%);
    border-bottom: 2px solid black;
    transition: width 1s ease;
  }

  .underline-middle.active::after {
    width: 100%;
  }

  .movie_grid_main {
    display: flex;
    overflow: hidden;
    position: relative;
    width: 100%;
  }

  .movie_slider {
    display: flex;
    transition: transform 0.5s ease;
    gap: 20px;
  }

  .movie_card {
    flex: 0 0 200px;
    background-color: #f5f5f5;
    border-radius: 10px;
    padding: 10px;
    text-align: center;
  }

  .movie_card img {
    width: 100%;
    border-radius: 10px;
  }

  .movie_grid_next,
  .next_grid_prev {
    position: absolute;
    top: 40%;
    transform: translateY(-50%);
    background-color: rgba(0, 0, 0, 0.3);
    color: white;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
  }

  .movie_grid_next {
    right: 0;
  }

  .next_grid_prev {
    left: 0;
  }

  .movie_card p strong {
    font-size: 10px;
    margin: 0;
  }

  .movie_card p {
    font-size: 10px;
    margin: 0;
  }
</style>

<section class="home_page">
  <div class="home_menu">
    <ul>
      <li><div class="home_menu_li active" data-icon="ğŸ¬">ì˜í™”</div></li>
      <li><div class="home_menu_li" data-icon="ğŸ‰">ì´ë²¤íŠ¸/í˜œíƒ</div></li>
      <li><div class="home_menu_li" data-icon="ğŸƒâ€â™‚ï¸">ì—‘í‹°ë¹„í‹°</div></li>
    </ul>
  </div>

  <div class="movie_sub">
    <div class="movie_sub_first">
      <div class="movie_sub_first_menu">
        <ul class="movie_sub_first_menu_front">
          <li><div class="movie_sub_first_menu_front_li underline-middle active">ë¬´ë¹„ì°¨íŠ¸</div></li>
          <li><div class="movie_sub_first_menu_front_li underline-middle">í˜„ì¬ìƒì˜ì‘</div></li>
          <li><div class="movie_sub_first_menu_front_li underline-middle">ìƒì˜ì˜ˆì •</div></li>
          <li><div class="movie_sub_first_menu_front_li underline-middle">ICECON</div></li>
          <li><div class="movie_sub_first_menu_front_li underline-middle">ì•„íŠ¸í•˜ìš°ìŠ¤</div></li>
          <li><div class="movie_sub_first_menu_front_li underline-middle">CGV Only</div></li>
        </ul>

        <ul class="movie_sub_first_menu_back">
          <li><a href="#">ì „ì²´ë³´ê¸°
            <svg width="14" height="14" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 4.57812L16 12.5781L8 20.5781" stroke="#707070" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </a></li>
        </ul>
      </div>

      <div class="movie_chart">
        <div class="movie_grid">
          <div class="movie_grid_main"></div>
        </div>

        <div class="anything_search">
          <div class="search_wrap">
            <span>ë¬´ì—‡ì„ ì°¾ê³ ê³„ì‹ ê°€ìš”?</span>
            <input type="text" placeholder="ì°¾ìœ¼ì‹œëŠ” ì˜í™”, ì„œë¹„ìŠ¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.">
            <div class="search_button">
              
            </div>
          </div>

          <div class="short_cut">
            <ul>
              <li>íŒì½˜ì£¼ë¬¸</li>
              <li>vipë¼ìš´ì§€</li>
              <li>ê²½í’ˆì´ë²¤íŠ¸</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="event">
    <p>ì´ë²¤íŠ¸/í˜œíƒ</p>
  </div>

  <div class="activity">
    <p>activity</p>
  </div>
</section>

<script src="./js/home.js"></script>
<script>
  const movie_list = [
    {
      "type": "ad",
      "title": "CGV ê´€ëŒê¶Œ ì¿ í° ë°›ì!",
      "subTitle": "ê²°ì œë‚´ì—­ í™•ì¸í•˜ê³ ",
      "description": "CGV ê´€ëŒê¶Œ ë°›ê¸°",
      "buttonText": "ìì„¸íˆ ë³´ê¸°",
      "image": "main_ad.webp"
    },
    {
      "type": "movie",
      "rank": 1,
      "title": "ê·¹ì¥íŒ ê·€ë©¸ì˜ ì¹¼ë‚ : ë¬´í•œì„±í¸",
      "grade": "15",
      "reservationRate": "29.2%",
      "releaseDate": "2025.08.22",
      "buttonText": "ì˜ˆë§¤í•˜ê¸°",
      "image": "ê·€ë©¸ì˜ ì¹¼ë‚ .jpg"
    },
    {
      "type": "movie",
      "rank": 2,
      "title": "ì¢€ë¹„ë”¸",
      "grade": "12",
      "score": "92%",
      "reservationRate": "18.9%",
      "totalAudience": "222.3ë§Œ",
      "buttonText": "ì˜ˆë§¤í•˜ê¸°",
      "image": "ì¢€ë¹„ë”¸.jpg"
    },
    {
      "type": "ad",
      "title": "ì£½ì€ ìë¥¼ ë¶€ë¥´ëŠ” ê°•ë ¹ìˆ²",
      "subTitle": "ìš¸ì—¬ë¦„ í•¨ê»˜í•˜ì§€ ì•Šì„ë˜?",
      "releaseDate": "2025.08.06",
      "buttonText": "ìì„¸íˆ ë³´ê¸°",
      "image": "ê°•ë ¹.webp"
    },
    {
      "type": "movie",
      "rank": 3,
      "title": "F1 ë” ë¬´ë¹„",
      "grade": "12",
      "score": "99%",
      "reservationRate": "11.6%",
      "totalAudience": "322ë§Œ",
      "buttonText": "ì˜ˆë§¤í•˜ê¸°",
      "image": "F1.jpg"
    },
    {
      "type": "concert",
      "title": "ìš”ë£¨ì‹œì¹´ ë¼ì´ë¸Œ 2024 [ì „ìƒ]",
      "ICECON": true,
      "grade": "ì „ì²´ê´€ëŒê°€",
      "date": "2025.09.10",
      "venue": "ì˜¬ë¦¼í”½ ì²´ì¡°ê²½ê¸°ì¥",
      "buttonText": "ì˜ˆë§¤í•˜ê¸°",
      "image": "ìš”ë£¨ì‹œì¹´.jpg"
    }
  ];

  let currentSlide = 0;
  const cardsPerView = 1;

  const tabs = document.querySelectorAll('.home_menu_li');
  const movieSection = document.querySelector('.movie_sub');
  const eventSection = document.querySelector('.event');
  const activitySection = document.querySelector('.activity');

  tabs.forEach((tab, index) => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');

      movieSection.style.display = 'none';
      eventSection.style.display = 'none';
      activitySection.style.display = 'none';

      if (index === 0) movieSection.style.display = 'block';
      if (index === 1) eventSection.style.display = 'block';
      if (index === 2) activitySection.style.display = 'block';
    });
  });

  movieSection.style.display = 'block';
  eventSection.style.display = 'none';
  activitySection.style.display = 'none';

  const movie_sub_first_menu_front_li = document.querySelectorAll('.movie_sub_first_menu_front_li');
  movie_sub_first_menu_front_li.forEach((element, index) => {
    element.addEventListener('click', () => {
      movie_sub_first_menu_front_li.forEach(t => t.classList.remove('active'));
      element.classList.add('active');

      if (index === 0) mainMovieChart();
      if (index === 1) test();
    });
  });

  function mainMovieChart() {
    currentSlide = 0;
    const movieGridMain = document.querySelector('.movie_grid_main');
    movieGridMain.innerHTML = `
      <div class="next_grid_prev">&#10094;</div>
      <div class="movie_slider"></div>
      <div class="movie_grid_next">&#10095;</div>
    `;

    const movieSlider = movieGridMain.querySelector('.movie_slider');

    movie_list.forEach(movie => {
      const card = document.createElement('div');
      card.className = 'movie_card';

      if (movie.type === "movie") {
        card.innerHTML = `
          <img src="./images/home/${movie.image}" alt="${movie.title}">
          <p><strong>${movie.rank}. ${movie.title}</strong></p>
          <p>ì˜ˆë§¤ìœ¨: ${movie.reservationRate}</p>
          <p>ê´€ëŒë“±ê¸‰: ${movie.grade}</p>
          <button>${movie.buttonText}</button>
        `;
      } else if (movie.type === "ad") {
        card.innerHTML = `
          <img src="./images/home/${movie.image}" alt="${movie.title}">
          <p><strong>${movie.title}</strong></p>
          <p>${movie.subTitle ?? ""}</p>
          <p>${movie.description ?? ""}</p>
          <button>${movie.buttonText}</button>
        `;
      } else if (movie.type === "concert") {
        card.innerHTML = `
          <img src="./images/home/${movie.image}" alt="${movie.title}">
          <p><strong>${movie.title}</strong></p>
          <p>ë‚ ì§œ: ${movie.date}</p>
          <p>ì¥ì†Œ: ${movie.venue}</p>
          <button>${movie.buttonText}</button>
        `;
      }

      movieSlider.appendChild(card);
    });

    const prevBtn = movieGridMain.querySelector('.next_grid_prev');
    const nextBtn = movieGridMain.querySelector('.movie_grid_next');

    prevBtn.addEventListener('click', () => {
      if (currentSlide > 0) {
        currentSlide--;
        updateSlider(movieSlider);
      }
    });

    nextBtn.addEventListener('click', () => {
      const maxSlide = movie_list.length - 3;
      if (currentSlide < maxSlide) {
        currentSlide++;
        updateSlider(movieSlider);
      }
    });

    updateSlider(movieSlider);
  }

  function test() {
    const movieGridMain = document.querySelector('.movie_grid_main');
    movieGridMain.innerHTML = '';

    const placeholder = document.createElement('div');
    placeholder.textContent = "í˜„ì¬ìƒì˜ì‘ ì½˜í…ì¸  ì¤€ë¹„ ì¤‘...";
    placeholder.style.padding = '20px';
    placeholder.style.fontSize = '16px';

    movieGridMain.appendChild(placeholder);
  }

  function updateSlider(slider) {
    const slideWidth = 220;
    slider.style.transform = `translateX(-${currentSlide * slideWidth}px)`;
  }

  mainMovieChart();
</script>
